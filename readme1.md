# 10 ГЛАВНЫХ правил красивого написания кода Java Script #

Если вы заботитесь о самом коде, и о том, как он написан, а не заняты лишь тем, чтобы создавать работающие программы, это означает что вы стремитесь к тому, чтобы ваш код был чистым. Профессиональный разработчик пишет код не только в расчёте на компьютеры, но и в расчёте на себя самого, встретившего этот код в будущем, и в расчёте на других программистов. Код, который вы пишете, не исчезает навсегда в недрах компьютера. Он живёт, изменяется, и, если написан плохо, вполне может сильно расстроить того, кому придётся редактировать его после того, как вы его написали. Вполне возможно, что этим «кем-то» будете именно вы.

Исходя из этих идей, чистый код можно определить как код, написанный так, что он сам себя объясняет. Этот код без труда смогут понять люди, его легко будет модифицировать или расширять.

## 1. Строгие проверки на равенство ##

Стремитесь к тому, чтобы вместо == использовать ===.

Например:

    // Если необдуманно использовать оператор == - это может серьёзно повлиять на программную логику. Это можно сравнить с тем, что некто ожидает, что пойдёт налево, но по какой-то причине вдруг идёт направо.
    0 == false // true
    0 === false // false
    2 == "2" // true
    2 === "2" // false

    // пример
    const value = "500";
    if (value === 500) {
    console.log(value);
    // этот код не выполнится
    }

    if (value === "500") {
    console.log(value);
    // этот код выполнится
    }

## 2. Переменные ##

Называйте переменные так, чтобы их имена раскрывали бы их сущность, их роль в программе. При таком подходе их удобно будет искать в коде, а тот, кто увидит этот код, легче сможет понять смысл выполняемых им действий.

Например:

    //Плохо:
    let daysSLV = 10;
    let y = new Date().getFullYear();

    let ok;
    if (user.age > 30) {
    ok = true;
    }

    //Хорошо:
    const MAX_AGE = 30;
    let daysSinceLastVisit = 10;
    let currentYear = new Date().getFullYear();

    const isUserOlderThanAllowed = user.age > MAX_AGE;

## 3. Функции ##

Используйте для функций длинные описательные имена. Учитывая то, что функция представляет собой описание выполнения некоего действия, её имя должно представлять собой глагол или фразу, полностью описывающую суть функции. Имена аргументов нужно подбирать так, чтобы они адекватно описывали бы представляемые ими данные. Имена функций должны сообщать читателю кода о том, что именно делают эти функции.

Например:

    //Плохо:
    function notif(user) {
    // реализация
    }

    //Хорошо:
    function notifyUser(emailAddress) {
    // реализация
    }

## 4. Условные конструкции ##

Избегайте логических конструкций везде, где это возможно. Вместо них используйте полиморфизм и наследование.

Например:

    //Плохо:
    class Car {
    // ...
    getMaximumSpeed() {
    switch (this.type) {
    case "Ford":
    return this.someFactor() + this.anotherFactor();
    case "Mazda":
    return this.someFactor();
    case "McLaren":
    return this.someFactor() - this.anotherFactor();
    }
    }
    }

    //Хорошо:
    class Car {
    // ...
    }

    class Ford extends Car {
    // ...
    getMaximumSpeed() {
    return this.someFactor() + this.anotherFactor();
    }
    }

    class Mazda extends Car {
    // ...
    getMaximumSpeed() {
    return this.someFactor();
    }
    }

    class McLaren extends Car {
    // ...
    getMaximumSpeed() {
    return this.someFactor() - this.anotherFactor();
    }
    }

## 5. ES-классы ##

Организуйте методы так, чтобы их можно было бы объединять в цепочки. Этот паттерн используют многие библиотеки — такие, как jQuery и Lodash. В результате ваш код будет более компактным, чем без использования этого паттерна. Речь идёт о том, что в конце каждой из функций класса нужно возвращать this. Это позволит объединять вызовы таких функций в цепочки.

Например:

    //Плохо:
    class Person {
    constructor(name) {
    this.name = name;
    }

    setSurname(surname) {
    this.surname = surname;
    }

    setAge(age) {
    this.age = age;
    }

    save() {
    console.log(this.name, this.surname, this.age);
    }
    }

    const person = new Person("John");
    person.setSurname("Doe");
    person.setAge(29);
    person.save();

    //Хорошо:
    class Person {
    constructor(name) {
    this.name = name;
    }

    setSurname(surname) {
    this.surname = surname;
    // Возвратим this для получения возможности объединять вызовы методов в цепочки
    return this;
    }

    setAge(age) {
    this.age = age;
    // Возвратим this для получения возможности объединять вызовы методов в цепочки
    return this;
    }

    save() {
    console.log(this.name, this.surname, this.age);
    // Возвратим this для получения возможности объединять вызовы методов в цепочки
    return this;
    }
    }

    const person = new Person("John")
    .setSurname("Doe")
    .setAge(29)
    .save();

## 6. Фигурные скобки ##

Плохо, фигурные скобки не нужны:

    if (n < 0) {alert(`Степень ${n} не поддерживается`);}

Никогда не разделяйте строки без фигурных скобок, можно ненароком сделать ошибку при добавлении строк:

    if (n < 0)
    alert(`Степень ${n} не поддерживается`);

В одну строку без скобок – приемлемо, если эта строка короткая:

    if (n < 0) alert(`Степень ${n} не поддерживается`);

Самый лучший вариант:

    if (n < 0) {
    alert(`Степень ${n} не поддерживается`);
    }

Для очень короткого кода допустима одна строка. Например: if (cond) return null. Но блок кода (последний вариант) обычно всё равно читается лучше.

## 7. Длина строки ##

Длинные горизонтальные строки кода лучше всего разбивать, например:

    // обратные кавычки ` позволяют разделять строку на части
    let str = `
    Рабочая группа TC39 организации Ecma International -
    это группа JavaScript-разработчиков, теоретиков и авторов движков JavaScript,
    которые вместе с сообществом занимаются поддержкой и развитием языка JavaScript.
    `;

Или для if:

    if (
    id === 123 &&
    moonPhase === 'Waning Gibbous' &&
    zodiacSign === 'Libra'
    ) {
    letTheSorceryBegin();
    }

Максимальную длину строки согласовывают в команде. Обычно это 80 или 120 символов.

## 8. Отступы ##

Горизонтальный отступ выполняется с помощью 2 или 4 пробелов, или символа табуляции (клавиша Tab). Какой из них выбрать – это уже на ваше усмотрение. Пробелы больше распространены.

Одно из преимуществ пробелов над табуляцией заключается в том, что пробелы допускают более гибкие конфигурации отступов, чем символ табуляции.

Например, мы можем выровнять аргументы относительно открывающей скобки:

    show(parameters,
    aligned, // 5 пробелов слева
    one,
    after,
    another
    ) {
    // ...
    }

Вертикальные отступы: пустые строки для разбивки кода на «логические блоки».

Даже одну функцию часто можно разделить на логические блоки. В примере ниже разделены инициализация переменных, основной цикл и возвращаемый результат:

    function pow(x, n) {
    let result = 1;
    //              <--
    for (let i = 0; i < n; i++) {
    result *= x;
    }
    //              <--
    return result;
    }

Вставляйте дополнительный перевод строки туда, где это сделает код более читаемым. Не должно быть более 9 строк кода подряд без вертикального отступа.

## 9. Размещение функций ##

Если вы пишете несколько вспомогательных функций, а затем используемый ими код, то существует три способа организации функций.

Объявить функции перед кодом, который их вызовет:

    // объявление функций
    function createElement() {
    ...
    }

    function setHandler(elem) {
    ...
    }

    function walkAround() {
    ...
    }

    // код, который использует их
    let elem = createElement();
    setHandler(elem);
    walkAround();

Сначала код, затем функции

    // код, использующий функции
    let elem = createElement();
    setHandler(elem);
    walkAround();

    // --- вспомогательные функции ---
    function createElement() {
    ...
    }

    function setHandler(elem) {
    ...
    }

    function walkAround() {
    ...
    }
    
Смешанный стиль: функция объявляется там, где она используется впервые.

В большинстве случаев второй вариант является предпочтительным.

Это потому, что при чтении кода мы сначала хотим знать, что он делает. Если сначала идёт код, то это тут же становится понятно. И тогда, может быть, нам вообще не нужно будет читать функции, особенно если их имена хорошо подобраны.

## 10. Уровни вложенности ##

Уровней вложенности должно быть немного.

Например, в цикле бывает полезно использовать директиву continue, чтобы избежать лишней вложенности.

Например, вместо добавления вложенного условия if, как здесь:


    for (let i = 0; i < 10; i++) {
    if (cond) {
    ... // <- ещё один уровень вложенности
    }
    }

Мы можем написать:

    for (let i = 0; i < 10; i++) {
    if (!cond) continue;
    ...  // <- нет лишнего уровня вложенности
    }

Аналогичная ситуация – с if/else и return.

Например, две нижеследующие конструкции идентичны.

Первая:

    function pow(x, n) {
    if (n < 0) {
    alert("Отрицательные значения 'n' не поддерживаются");
    } else {
    let result = 1;

    for (let i = 0; i < n; i++) {
    result *= x;
    }

    return result;
    }
    }

Вторая:

    function pow(x, n) {
    if (n < 0) {
    alert("Отрицательные значения 'n' не поддерживаются");
    return;
    }

    let result = 1;

    for (let i = 0; i < n; i++) {
    result *= x;
    }

    return result;
    }

Второй вариант является более читабельным, потому что «особый случай» n < 0 обрабатывается на ранней стадии. После проверки можно переходить к «основному» потоку кода без необходимости увеличения вложенности.

##  И про точку с запятой... ##

Точки с запятой должны присутствовать после каждого выражения, даже если их, казалось бы, можно пропустить.

Есть языки, в которых точка с запятой необязательна и редко используется. Однако в JavaScript бывают случаи, когда перенос строки не интерпретируется, как точка с запятой, что может привести к ошибкам.

Если вы – опытный разработчик на JavaScript, то можно выбрать стиль кода без точек с запятой, например StandardJS. В ином случае, лучше будет использовать точки с запятой, чтобы избежать подводных камней. Большинство разработчиков их ставят.